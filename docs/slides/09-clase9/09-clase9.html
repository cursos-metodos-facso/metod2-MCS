<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Metodología Cuantitativa Avanzada</title>
    <meta charset="utf-8" />
    <meta name="author" content=".small[Kevin Carrasco    Departamento de Sociología - UCH / COES   ]" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/animate.css/animate.xaringan.css" rel="stylesheet" />
    <script src="libs/fabric/fabric.min.js"></script>
    <link href="libs/xaringanExtra-scribble/scribble.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-scribble/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#FF0000"],"pen_size":3,"eraser_size":30,"palette":[]}) })</script>
    <link rel="stylesheet" href="../../files/css/custom_2020.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

class: front










&lt;!---
Para correr en ATOM
- open terminal, abrir R (simplemente, R y enter)
- rmarkdown::render('static/docpres/07_interacciones/7interacciones.Rmd', 'xaringan::moon_reader')

About macros.js: permite escalar las imágenes como [scale 50%](path to image), hay si que grabar ese archivo js en el directorio.
---&gt;


.pull-left[
## Metodología Cuantitativa Avanzada
## **Kevin Carrasco**
## Magíster en ciencias sociales - Universidad de Chile
## 1er Sem 2025
## [.green[metod2-mcs.netlify.com]](https://metod2-mcs.netlify.com)
] 


.pull-right[
.right[
&lt;br&gt;
## .yellow[Sesión 9: Regresión logística]
![:scale 70%](../../files/img/eval-hires.png)

]

]

---
class: inverse, bottom, right



# .red[Sesión 9]
&lt;br&gt;

.yellow[Repaso sesión anterior]

Introducción a regresión logística

Estimación de Regresión logística

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
---

layout: true
class: animated, fadeIn


---
# Conceptos centrales

- población - muestra

- parámetro - estadístico

- **error estándar**: permite expresar un rango de variación probable de un parámetro, con un cierto nivel de probabilidad

---
# Distribución normal

![](../images/normal.png)

---
# Inferencia

- `\(H_0\)`: hipótesis nula (en general: no hay diferencias en la población)

- Establecer un nivel de significación `\(\alpha\)`, convencionalmente 0.05 o inferior para rechazar `\(H_0\)` -&gt; 95% de confianza

- Calcular error estándar 

- Calcular prueba estadística que permita relacionar el error estándar con los niveles de significación

---
# Inferencia en regresión

- Se calcula el error estándar del `\(\beta\)`

- Se divide el `\(\beta\)` por el error estándar -&gt; prueba `\(t\)`

- Se compara el `\(t\)` con el `\(t_{crítico}\)` en la tabla de valores `\(t\)`, asociada a un nivel de confianza y grados de libertad `\(n-k-1\)`

- Si `\(t\)` &gt; `\(t_{crítico}\)` = se rechaza `\(H_0\)` con una probabilidad de error _p_.

---
class: inverse, bottom, right


# .red[Sesión 9]
&lt;br&gt;

Repaso sesión anterior

.yellow[Introducción a regresión logística]

Estimación de Regresión logística

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
---
## Tipos de datos en relación a escalas de medición.

* *Datos categóricos*: pueden ser medidos sólo mediante escalas nominales, u ordinales en caso de orden de rango

* *Datos continuos*:
    - Medidos en escalas intervalares o de razón
    - Pueden ser transformados a datos categóricos

???
Conversión de continuo a categórico: estatura (cm) a categorías bajo – mediano – alto


---
class: inverse, center, bottom

.pull-left[
![:scale 80%](../images/postertitanic.jpg)
]

## ¿Se puede anticipar el final?

???

Si vas al cine a ver esta película, y si antes conoces los datos sobre el Titanic, puedes anticipar el final?

---
# Titanic data




.small[

<div class="container st-container">
<table class="table table-striped table-bordered st-table st-table-striped st-table-bordered st-multiline ">
  <thead>
    <tr>
      <th align="center" class="st-protect-top-border"><strong>No</strong></th>
      <th align="center" class="st-protect-top-border"><strong>Variable</strong></th>
      <th align="center" class="st-protect-top-border"><strong>Stats / Values</strong></th>
      <th align="center" class="st-protect-top-border"><strong>Freqs (% of Valid)</strong></th>
      <th align="center" class="st-protect-top-border"><strong>Graph</strong></th>
      <th align="center" class="st-protect-top-border"><strong>Valid</strong></th>
      <th align="center" class="st-protect-top-border"><strong>Missing</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="center">1</td>
      <td align="left">survived
[factor]</td>
      <td align="left" style="padding:8;vertical-align:middle"><table style="border-collapse:collapse;border:none;margin:0"><tr style="background-color:transparent"><td style="padding:0;margin:0;border:0" align="left">1. No sobrevive</td></tr><tr style="background-color:transparent"><td style="padding:0;margin:0;border:0" align="left">2. Sobrevive</td></tr></table></td>
      <td align="left" style="padding:0;vertical-align:middle"><table style="border-collapse:collapse;border:none;margin:0"><tr style="background-color:transparent"><td style="padding:0 5px 0 7px;margin:0;border:0" align="right">619</td><td style="padding:0 2px 0 0;border:0;" align="left">(</td><td style="padding:0;border:0" align="right">59.2%</td><td style="padding:0 4px 0 2px;border:0" align="left">)</td></tr><tr style="background-color:transparent"><td style="padding:0 5px 0 7px;margin:0;border:0" align="right">427</td><td style="padding:0 2px 0 0;border:0;" align="left">(</td><td style="padding:0;border:0" align="right">40.8%</td><td style="padding:0 4px 0 2px;border:0" align="left">)</td></tr></table></td>
      <td align="left" style="vertical-align:middle;padding:0;background-color:transparent;"><img style="border:none;background-color:transparent;padding:0;max-width:max-content;" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAGUAAAA3BAMAAADnFJkAAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAPUExURf////3+/aampvDw8P///7GHRIEAAAACdFJOUwAAdpPNOAAAAAFiS0dEAIgFHUgAAAAHdElNRQfpBwQFBwiHjHezAAAAP0lEQVRIx2NgGH5AiQSgANWjbEw8GNUzqmdUz/DWQ04ZIkgCEKCzHgJewKoHf7gZjeoZ1TOqZwTpIacMGU4AAM9RXE6bK1iVAAAAAElFTkSuQmCC"></td>
      <td align="center">1046
(100.0%)</td>
      <td align="center">0
(0.0%)</td>
    </tr>
    <tr>
      <td align="center">2</td>
      <td align="left">sex
[factor]</td>
      <td align="left" style="padding:8;vertical-align:middle"><table style="border-collapse:collapse;border:none;margin:0"><tr style="background-color:transparent"><td style="padding:0;margin:0;border:0" align="left">1. Hombre</td></tr><tr style="background-color:transparent"><td style="padding:0;margin:0;border:0" align="left">2. Mujer</td></tr></table></td>
      <td align="left" style="padding:0;vertical-align:middle"><table style="border-collapse:collapse;border:none;margin:0"><tr style="background-color:transparent"><td style="padding:0 5px 0 7px;margin:0;border:0" align="right">658</td><td style="padding:0 2px 0 0;border:0;" align="left">(</td><td style="padding:0;border:0" align="right">62.9%</td><td style="padding:0 4px 0 2px;border:0" align="left">)</td></tr><tr style="background-color:transparent"><td style="padding:0 5px 0 7px;margin:0;border:0" align="right">388</td><td style="padding:0 2px 0 0;border:0;" align="left">(</td><td style="padding:0;border:0" align="right">37.1%</td><td style="padding:0 4px 0 2px;border:0" align="left">)</td></tr></table></td>
      <td align="left" style="vertical-align:middle;padding:0;background-color:transparent;"><img style="border:none;background-color:transparent;padding:0;max-width:max-content;" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAGsAAAA3BAMAAAD53amzAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAPUExURf////3+/aampvDw8P///7GHRIEAAAACdFJOUwAAdpPNOAAAAAFiS0dEAIgFHUgAAAAHdElNRQfpBwQFBwnwi0clAAAAQklEQVRIx2NgGN5AiTSgANWmbEwSGNU2qm1U26g2rNrILIIESQMCA6INn0fwaMMTkkaj2ka1jWob1UasNjKLoOEKAI3JZavyhCAkAAAAAElFTkSuQmCC"></td>
      <td align="center">1046
(100.0%)</td>
      <td align="center">0
(0.0%)</td>
    </tr>
    <tr>
      <td align="center">3</td>
      <td align="left">age
[numeric]</td>
      <td align="left" style="padding:8;vertical-align:middle"><table style="border-collapse:collapse;border:none;margin:0"><tr style="background-color:transparent"><td style="padding:0;margin:0;border:0" align="left">Mean (sd) : 29.9 (14.4)</td></tr><tr style="background-color:transparent"><td style="padding:0;margin:0;border:0" align="left">min &le; med &le; max:</td></tr><tr style="background-color:transparent"><td style="padding:0;margin:0;border:0" align="left">0.2 &le; 28 &le; 80</td></tr><tr style="background-color:transparent"><td style="padding:0;margin:0;border:0" align="left">IQR (CV) : 18 (0.5)</td></tr></table></td>
      <td align="left" style="vertical-align:middle">98 distinct values</td>
      <td align="left" style="vertical-align:middle;padding:0;background-color:transparent;"><img style="border:none;background-color:transparent;padding:0;max-width:max-content;" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAJgAAABuBAMAAAApJ8cWAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAPUExURf////3+/aampvDw8P///7GHRIEAAAACdFJOUwAAdpPNOAAAAAFiS0dEAIgFHUgAAAAHdElNRQfpBwQFBwnwi0clAAAAu0lEQVRo3u3X4Q2DIBCGYVagG0g3KPvvphBJtC1yh6fR9v3+kegjIXCHzpGe+Pc8wpTB61LF4hQwMDAwHaYtQ5vYUzk7MDAwsIthqSYGKywZLzCwM7G8g62wPAAD+29MeKRkmHB2YGBgMkzwJyvHYrsjgx2NNW4xOqzREGZs9cm92OopMLBfw+rnswOrz+4wrLQME6xULDNs+f5Z2Pcm2omVFQlW2OcOBgO7AxbmDBZYGWRxeXHZHUd6MgLupwTfqRi/2QAAAABJRU5ErkJggg=="></td>
      <td align="center">1046
(100.0%)</td>
      <td align="center">0
(0.0%)</td>
    </tr>
  </tbody>
</table>
<p>Generated by <a href='https://github.com/dcomtois/summarytools'>summarytools</a> 1.0.1 (<a href='https://www.r-project.org/'>R</a> version 4.3.2)<br/>2025-07-04</p>
</div>
]

---
# Sobrevivientes
.pull-left[
.small[


```r
plot1 &lt;-ggplot(tt, 
     aes(survived, fill=survived)) + 
  geom_bar() + 
  geom_text(
     aes(label = scales::percent((..count..)/sum(..count..))),
     stat='count',size=10, vjust = 3) + 
  theme(legend.position="none", 
        text = element_text(size = 30),
        axis.title=element_blank())
```
]
]
.pull-right[
![](09-clase9_files/figure-html/unnamed-chunk-5-1.png)&lt;!-- --&gt;


]



---
# Sexo

.center[
![](09-clase9_files/figure-html/unnamed-chunk-6-1.png)&lt;!-- --&gt;
]
---
## Sobrevivencia / sexo

.pull-left[
![:scale 95%](mosaic.png)
]


.pull-right[
.medium[

```
##               
##                Hombre Mujer
##   No sobrevive   0.79  0.25
##   Sobrevive      0.21  0.75
```
El 75% de las mujeres sobrevive, mientras el 25% no sobrevive.
]
]

---
class: inverse, middle, center

## ¿En qué medida la probabilidad de sobrevivir depende del sexo?

## ¿Es esta probabilidad estadísticamente significativa?

---
# Alternativas:

- tabla de contingencia, `\(\chi^2\)`

  - análisis de tendencia general, significación estadística
  - pero ... poco parsimoniosa, y no hay control estadístico
  
- ¿Aprovechar las ventajas del modelo de regresión?
  - expresar la relación en un número ( `\(\beta\)` )
  - inferencia
  - control estadístico (parcialización)

---
# Regresión

### Modelando la probabilidad de sobrevivir con regresión OLS



.small[

```r
reg_tit=lm(survived ~ sex, data= tt)
```

```
## Warning in model.response(mf, "numeric"): using type = "numeric" with a factor response will be ignored
```

```
## Warning in Ops.factor(y, z$residuals): '-' not meaningful for factors
```

]


-&gt; Advertencia de R

---
## Modelo de probabilidad lineal

.pull-left[
.small[
Se da este nombre a los modelos de regresión donde una variable dependiente dicotómica se estima de manera tradicional (mínimos cuadrados ordinarios)


```r
str(tt$survived)
```

```
##  Factor w/ 2 levels "No sobrevive",..: 2 2 1 1 1 2 2 1 2 1 ...
```

```r
tt &lt;- tt %&gt;% mutate(survived_n=recode(survived,
"No sobrevive"=0, "Sobrevive"=1))
str(tt$survived_n)
```

```
##  num [1:1046] 1 1 0 0 0 1 1 0 1 0 ...
```
]
]

.pull-right[
.small[


```r
reg_tit=lm(survived_n ~ sex, data=tt)
```


&lt;table style="border-collapse:collapse; border:none;"&gt;
&lt;tr&gt;
&lt;th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; "&gt;&amp;nbsp;&lt;/th&gt;
&lt;th colspan="2" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; "&gt;Modelo 1&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; "&gt;Predictores&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;β&lt;/td&gt;
&lt;td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  "&gt;std. Error&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;(Intercept)&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;0.205 &lt;sup&gt;***&lt;/sup&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;0.016&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; "&gt;sex [Mujer]&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;0.547 &lt;sup&gt;***&lt;/sup&gt;&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "&gt;0.027&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;"&gt;Observations&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="2"&gt;1046&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm;"&gt;R&lt;sup&gt;2&lt;/sup&gt; / R&lt;sup&gt;2&lt;/sup&gt; adjusted&lt;/td&gt;
&lt;td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left;" colspan="2"&gt;0.289 / 0.289&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td colspan="3" style="font-style:italic; border-top:double black; text-align:right;"&gt;* p&amp;lt;0.05&amp;nbsp;&amp;nbsp;&amp;nbsp;** p&amp;lt;0.01&amp;nbsp;&amp;nbsp;&amp;nbsp;*** p&amp;lt;0.001&lt;/td&gt;
&lt;/tr&gt;

&lt;/table&gt;
]
]

---
## Significado coeficientes modelo probabilidad lineal

.pull-left[
**Promedio de supervivencia por sexo**
&lt;!-- html table generated in R 4.3.2 by xtable 1.8-4 package --&gt;
&lt;!-- Fri Jul  4 01:07:10 2025 --&gt;
&lt;table border=1&gt;
&lt;tr&gt; &lt;th&gt;  &lt;/th&gt; &lt;th&gt; Mean &lt;/th&gt; &lt;th&gt; N &lt;/th&gt; &lt;th&gt; Std. Dev. &lt;/th&gt;  &lt;/tr&gt;
  &lt;tr&gt; &lt;td&gt; Hombre &lt;/td&gt; &lt;td align="right"&gt; 0.21 &lt;/td&gt; &lt;td align="right"&gt; 658 &lt;/td&gt; &lt;td align="right"&gt; 0.40 &lt;/td&gt; &lt;/tr&gt;
  &lt;tr&gt; &lt;td&gt; Mujer &lt;/td&gt; &lt;td align="right"&gt; 0.75 &lt;/td&gt; &lt;td align="right"&gt; 388 &lt;/td&gt; &lt;td align="right"&gt; 0.43 &lt;/td&gt; &lt;/tr&gt;
  &lt;tr&gt; &lt;td&gt; Total &lt;/td&gt; &lt;td align="right"&gt; 0.41 &lt;/td&gt; &lt;td align="right"&gt; 1046 &lt;/td&gt; &lt;td align="right"&gt; 0.49 &lt;/td&gt; &lt;/tr&gt;
   &lt;/table&gt;
]

.pull-right[
- El valor del intercepto=0.205 (0.21 aproximado) es el valor predicho para la categoría de referencia "hombre".

- El `\(\beta\)` de sexo (mujer) =0.547 sumado al intercepto equivale al porcentaje de supervivencia de mujeres]

---
class: roja, middle

# funciona ... .yellow[PERO]

---
## Limitaciones modelo de regresión lineal para dependientes dicotómicas

.center[
![](09-clase9_files/figure-html/unnamed-chunk-14-1.png)&lt;!-- --&gt;
]

---
## Problemas ....
.center[
![](09-clase9_files/figure-html/unnamed-chunk-15-1.png)&lt;!-- --&gt;
]

---
# Problemas ...

.pull-left[
Si hubieran sobrevivido todos los menores de 20 y muerto todos los mayores de 40 ...

]

.pull-right[
![](09-clase9_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;
]


---
class: inverse

## Problemas regresión tradicional (OLS) para dependientes dicotómicas

- ### Eventuales predicciones fuera del rango de probabilidades posibles
- ### Ajuste a los datos / residuos: ¿Es la mejor aproximación una recta?

---
class: roja, right

## La regresión .yellow[logística] ofrece una solución a los problemas del rango de predicciones y de ajuste a los datos del modelo de probabilidad lineal

--

## Se logra mediante una _transformación_ de lo(s) beta(s)  a .yellow[coeficientes  *LOGIT*]
]

---
class: middle center
![:scale 90%](bending.png)

---
## OLS vs Logit

.pull-left[
![](09-clase9_files/figure-html/unnamed-chunk-18-1.png)&lt;!-- --&gt;
]

.pull-right[



![](09-clase9_files/figure-html/unnamed-chunk-20-1.png)&lt;!-- --&gt;
]


---
# ¿Qué es el logit?

--


## Es el logaritmo de los odds

--

# ... qué son los odds?

--

## Una razón de *probabilidades*


--
## Para llegar hasta regresión logística, hay que pasar por los odds (chances), y los odds-ratio (proporción de chances)

---
# Odds 

- **odds** (chances): probabilidad de que algo ocurra dividido por la probabilidad de que no ocurra

`$$Odds=\frac{p}{1-p}$$`

--

.medium[
Ej. Titanic:
  - 427 sobrevivientes (41%), 619 muertos (59%)
`$$Odds_{sobrevivir}=427/619=0.41/0.59=0.69$$`

.center[**Es decir, las chances de sobrevivir son de 0.69**]

]
---
# Odds

- Odds de 1 significan chances iguales, menores a 1 son negativas y mayores a 1 son positivas

- _Propiedad simétrica_: 
  - un `\(Odd=4\)` es una asociación positiva proporcional a la asociación negativa `\(Odd=1/4=0.25\)`

---
.pull-left[
## Odds de superviviencia para los hombres
.medium[

```
##               
##                Hombre Mujer
##   No sobrevive    523    96
##   Sobrevive       135   292
```
]

.medium[

```
##               
##                Hombre Mujer
##   No sobrevive   0.79  0.25
##   Sobrevive      0.21  0.75
```
El 21% de los hombres sobrevive mientras el 79% no sobrevive.
]
]
--
.pull-right[
.medium[

`$$Odds_{hombres}=\frac{0.21}{0.79}=0.27$$`

*La probabilidad de sobrevivencia en los hombres es 0.27 veces a la no sobrevivencia*

... o en otros términos

*Hay 0.27 hombres que sobreviven por cada uno que no sobrevive*

*Hay 27 hombres que sobreviven por cada 100 hombres que no sobreviven*
]
]

---
## Odds de superviviencia para las mujeres

.pull-left[
.medium[

```
##               
##                Hombre Mujer
##   No sobrevive   0.79  0.25
##   Sobrevive      0.21  0.75
```
El 75% de las mujeres sobrevive, mientras el 25% no sobrevive.


]
]
--
.pull-right[
.medium[
`$$Odds_{mujeres}=\frac{0.75}{0.25}=3$$`
*La probabilidad de sobrevivencia en las mujeres es 3 veces a la no sobrevivencia*


*Hay 3 mujeres que sobreviven por cada mujer que no sobrevive*

o en otros términos

*Hay 300 mujeres que sobreviven al titanic por cada 100 mujeres que no sobreviven*
]
]


---
## Odds ratio (OR)

.pull-left[
- los odds-ratio (o razón de chances) permiten reflejar la asociación entre las chances de dos variables dicotómicas


**¿Tienen las mujeres más chances de sobrevivir que los hombres?**
]

--
.pull-right[
.medium[
&lt;table style="border-collapse:collapse; border:none;"&gt;
 &lt;tr&gt;
 &lt;th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; border-bottom:1px solid;" rowspan="2"&gt;survived&lt;/th&gt;
 &lt;th style="border-top:double; text-align:center; font-style:italic; font-weight:normal;" colspan="2"&gt;sex&lt;/th&gt;
 &lt;th style="border-top:double; text-align:center; font-style:italic; font-weight:normal; font-weight:bolder; font-style:italic; border-bottom:1px solid; " rowspan="2"&gt;Total&lt;/th&gt;
 &lt;/tr&gt;
 
&lt;tr&gt;
 &lt;td style="border-bottom:1px solid; text-align:center; padding:0.2cm;"&gt;Hombre&lt;/td&gt;
 &lt;td style="border-bottom:1px solid; text-align:center; padding:0.2cm;"&gt;Mujer&lt;/td&gt;
 &lt;/tr&gt;
 
&lt;tr&gt; 
&lt;td style="padding:0.2cm;  text-align:left; vertical-align:middle;"&gt;No sobrevive&lt;/td&gt;
&lt;td style="padding:0.2cm; text-align:center; "&gt;&lt;span style="color:black;"&gt;523&lt;/span&gt;&lt;br&gt;&lt;span style="color:#339933;"&gt;79.5&amp;nbsp;&amp;#37;&lt;/span&gt;&lt;/td&gt;
&lt;td style="padding:0.2cm; text-align:center; "&gt;&lt;span style="color:black;"&gt;96&lt;/span&gt;&lt;br&gt;&lt;span style="color:#339933;"&gt;24.7&amp;nbsp;&amp;#37;&lt;/span&gt;&lt;/td&gt;
&lt;td style="padding:0.2cm; text-align:center;  "&gt;&lt;span style="color:black;"&gt;619&lt;/span&gt;&lt;br&gt;&lt;span style="color:#339933;"&gt;59.2&amp;nbsp;&amp;#37;&lt;/span&gt;&lt;/td&gt; 
&lt;/tr&gt;
 
&lt;tr&gt; 
&lt;td style="padding:0.2cm;  text-align:left; vertical-align:middle;"&gt;Sobrevive&lt;/td&gt;
&lt;td style="padding:0.2cm; text-align:center; "&gt;&lt;span style="color:black;"&gt;135&lt;/span&gt;&lt;br&gt;&lt;span style="color:#339933;"&gt;20.5&amp;nbsp;&amp;#37;&lt;/span&gt;&lt;/td&gt;
&lt;td style="padding:0.2cm; text-align:center; "&gt;&lt;span style="color:black;"&gt;292&lt;/span&gt;&lt;br&gt;&lt;span style="color:#339933;"&gt;75.3&amp;nbsp;&amp;#37;&lt;/span&gt;&lt;/td&gt;
&lt;td style="padding:0.2cm; text-align:center;  "&gt;&lt;span style="color:black;"&gt;427&lt;/span&gt;&lt;br&gt;&lt;span style="color:#339933;"&gt;40.8&amp;nbsp;&amp;#37;&lt;/span&gt;&lt;/td&gt; 
&lt;/tr&gt;
 
&lt;tr&gt; 
&lt;td style="padding:0.2cm;  border-bottom:double; font-weight:bolder; font-style:italic; text-align:left; vertical-align:middle;"&gt;Total&lt;/td&gt;
&lt;td style="padding:0.2cm; text-align:center;   border-bottom:double;"&gt;&lt;span style="color:black;"&gt;658&lt;/span&gt;&lt;br&gt;&lt;span style="color:#339933;"&gt;100&amp;nbsp;&amp;#37;&lt;/span&gt;&lt;/td&gt;
&lt;td style="padding:0.2cm; text-align:center;   border-bottom:double;"&gt;&lt;span style="color:black;"&gt;388&lt;/span&gt;&lt;br&gt;&lt;span style="color:#339933;"&gt;100&amp;nbsp;&amp;#37;&lt;/span&gt;&lt;/td&gt;
&lt;td style="padding:0.2cm; text-align:center;   border-bottom:double;"&gt;&lt;span style="color:black;"&gt;1046&lt;/span&gt;&lt;br&gt;&lt;span style="color:#339933;"&gt;100&amp;nbsp;&amp;#37;&lt;/span&gt;&lt;/td&gt; 
&lt;/tr&gt;
 
&lt;/table&gt;
]
]

---
# Odds Ratio

**¿Cuantas más chances de sobrevivir tienen las mujeres respecto de los hombres?**

- OR supervivencia mujeres / OR supervivencia hombres

.medium[
`$$OR=\frac{p_{m}/(1-p_{m})}{p_{h}/(1-p_{h})}=\frac{0.753/(1-0.753)}{0.205/(1-0.205)}=\frac{3.032}{0.257}=11.78$$`
]

--

### Las chances de sobrevivir de las mujeres son **11.78** veces más que las de los hombres.

---
class: inverse, middle, center

## El Odds-Ratio (OR) nos permite expresar **en un número** la relación entre dos variables categóricas

## Por lo tanto, es una versión del `\(\beta\)` para dependientes categóricas


---
class: inverse, middle, center

## Pero ... el **OR** tiene algunas limitaciones que requieren una transformación adicional


---
class: inverse, bottom, right


# .red[Sesión 9]
&lt;br&gt;

Repaso sesión anterior

Introducción a regresión logística

.yellow[Estimación de Regresión logística]

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;

---
# Regresión logística y odds


.pull-left[
![](09-clase9_files/figure-html/unnamed-chunk-25-1.png)&lt;!-- --&gt;
]


.pull-right[
Una de las transformaciones que permite realizar una estimación de regresión con variables dependientes dicotómicas es el **logit**, que es logaritmo de los odds.
]

---
# Logit

`$$Logit=ln(Odd)=ln(\frac{p}{1-p})$$`
---
.small[

.pull-left[
## Probabilidades, odds y logit

]

.pull-right[



```
##    prob odds logit
##  0.0010           
##  0.0564           
##  0.1119           
##  0.1673           
##  0.2228           
##  0.2782           
##  0.3337           
##  0.3891           
##  0.4446           
##  0.5000           
##  0.5554           
##  0.6109           
##  0.6663           
##  0.7218           
##  0.7772           
##  0.8327           
##  0.8881           
##  0.9436           
##  0.9990
```


]
]

---
.small[

.pull-left[
## Probabilidades, odds y logit


```r
df$odds &lt;- df$prob/(1-df$prob)

df$logit &lt;- log(df$odds)
```


]

.pull-right[



```
##    prob     odds  logit
##  0.0010   0.0010 -6.907
##  0.0564   0.0598 -2.816
##  0.1119   0.1260 -2.072
##  0.1673   0.2010 -1.605
##  0.2228   0.2866 -1.250
##  0.2782   0.3855 -0.953
##  0.3337   0.5008 -0.692
##  0.3891   0.6370 -0.451
##  0.4446   0.8004 -0.223
##  0.5000   1.0000  0.000
##  0.5554   1.2494  0.223
##  0.6109   1.5700  0.451
##  0.6663   1.9970  0.692
##  0.7218   2.5942  0.953
##  0.7772   3.4888  1.250
##  0.8327   4.9761  1.605
##  0.8881   7.9374  2.072
##  0.9436  16.7165  2.816
##  0.9990 999.0000  6.907
```


]
]

---
.small[

.pull-left[
## Probabilidades, odds y logit


```r
df$odds &lt;- df$prob/(1-df$prob)

df$logit &lt;- log(df$odds)
```


]

.pull-right[



```r
##    prob     odds  logit
##  0.0010   0.0010 -6.907
##  0.0564   0.0598 -2.816
##  0.1119   0.1260 -2.072
##  0.1673   0.2010 -1.605
##  0.2228   0.2866 -1.250
##  0.2782   0.3855 -0.953
##  0.3337   0.5008 -0.692
##  0.3891   0.6370 -0.451
##  0.4446   0.8004 -0.223
*##  0.5000   1.0000  0.000
##  0.5554   1.2494  0.223
##  0.6109   1.5700  0.451
##  0.6663   1.9970  0.692
##  0.7218   2.5942  0.953
##  0.7772   3.4888  1.250
##  0.8327   4.9761  1.605
##  0.8881   7.9374  2.072
##  0.9436  16.7165  2.816
##  0.9990 999.0000  6.907
```


]
]

---
.small[

.pull-left[
## Probabilidades, odds y logit


```r
df$odds &lt;- df$prob/(1-df$prob)

df$logit &lt;- log(df$odds)
```


]

.pull-right[



```r
##    prob     odds  logit
*##  0.0010   0.0010 -6.907
##  0.0564   0.0598 -2.816
##  0.1119   0.1260 -2.072
##  0.1673   0.2010 -1.605
##  0.2228   0.2866 -1.250
##  0.2782   0.3855 -0.953
##  0.3337   0.5008 -0.692
##  0.3891   0.6370 -0.451
##  0.4446   0.8004 -0.223
*##  0.5000   1.0000  0.000
##  0.5554   1.2494  0.223
##  0.6109   1.5700  0.451
##  0.6663   1.9970  0.692
##  0.7218   2.5942  0.953
##  0.7772   3.4888  1.250
##  0.8327   4.9761  1.605
##  0.8881   7.9374  2.072
##  0.9436  16.7165  2.816
*##  0.9990 999.0000  6.907
```


]
]



---
# Estimación en R: `glm`

```
modelo &lt;- glm(dependiente ~ indep 1 + indep2 + ...,
          data=datos,
          family="binomial")
```

- `glm` (general lineal model) es la función para variables dependientes categóricas


- `family="binomial"` indica que la dependiente es dicotómica



---
# Ejemplo Titanic

.pull-left[


```r
modelo_titanic &lt;-
glm(survived ~ sex,
data = tt,
family = "binomial")
```

]

.pull-right[.small[

&lt;table class="texreg" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;caption-side: bottom;color: #000000;border-top: 2px solid #000000;"&gt;
&lt;caption&gt; &lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/th&gt;
&lt;th style="padding-left: 5px;padding-right: 5px;"&gt;Logit&lt;/th&gt;
&lt;th style="padding-left: 5px;padding-right: 5px;"&gt;OR&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr style="border-top: 1px solid #000000;"&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Intercepto&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;-1.354&lt;sup&gt;&amp;#42;&amp;#42;&amp;#42;&lt;/sup&gt;&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;0.258&lt;sup&gt;&amp;#42;&amp;#42;&amp;#42;&lt;/sup&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;(0.097)&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Mujer (Ref=Hombre)&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;2.467&lt;sup&gt;&amp;#42;&amp;#42;&amp;#42;&lt;/sup&gt;&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;11.784&lt;sup&gt;&amp;#42;&amp;#42;&amp;#42;&lt;/sup&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;(0.152)&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr style="border-top: 1px solid #000000;"&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;AIC&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1106.008&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1106.008&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;BIC&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1115.914&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1115.914&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Log Likelihood&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;-551.004&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;-551.004&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Deviance&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1102.008&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1102.008&lt;/td&gt;
&lt;/tr&gt;
&lt;tr style="border-bottom: 2px solid #000000;"&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Num. obs.&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1046&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1046&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;
&lt;tr&gt;
&lt;td style="font-size: 0.8em;" colspan="3"&gt;&lt;sup&gt;&amp;#42;&amp;#42;&amp;#42;&lt;/sup&gt;p &amp;lt; 0.001; &lt;sup&gt;&amp;#42;&amp;#42;&lt;/sup&gt;p &amp;lt; 0.01; &lt;sup&gt;&amp;#42;&lt;/sup&gt;p &amp;lt; 0.05&lt;/td&gt;
&lt;/tr&gt;
&lt;/tfoot&gt;
&lt;/table&gt;

]
]


---
## Interpretación de asociaciones y contraste de hipótesis

### - Coeficiente logit asociado a sexo (mujer) = +2.467 :

  - El log-odds de sobrevivencia aumenta para las mujeres en 2.467 en comparación con los hombres. 

--

### Contraste de hipótesis

- La diferencia de las probabilidades de sobrevivir entre hombres y mujeres son estadísticamente significativas, por lo que se rechaza la hipótesis nula (de ausencia de diferencias entre hombres y mujeres) con un nivel de probabilidad `\(p&lt;0.001\)`.


---
## Interpretación de coeficientes logit


- Sustantivamente no nos dice mucho, ya que el logit es una transformación de la escala original.

- Por lo tanto, para poder interpretar el sentido del coeficiente se requiere volver a la métrica de odds mediante una transformación inversa o **exponenciación**


---
## De logits a odds 

.pull-left[
`$$logit_x=log(Odds)$$`
`$$e^{logit}=Odds_X$$`
`$$e^{2.467}=11.78$$`
]

.pull-right[

```r
exp(2.467)
```

```
## [1] 11.78703
```
### Las chances (odds) de sobrevivir siendo mujer son **11.78** veces más que las de un hombre. 
]

---
## De logits a odds

`$$Odds_X=e^{\beta_0 + \beta_jX_j}$$`
&lt;br&gt;
--
- Predicción para **mujeres**= -1.354 + (2.467 * Sexo=1) = 1.113

-  Predicción para **hombres**= -1.354 + (2.467 * Sexo=0) = -1.354

--

&lt;br&gt;

`$$Odds_{mujer}=e^{1.113}=3.032$$`
`$$Odds_{hombre}=e^{-1.354}=0.257$$`

---
## Transformación a probabilidades predichas

`$$p_{mujeres}=\frac{e^{1.113}}{1+e^{1.113}}=\frac{3.04}{4.04}=0.752$$`
`$$p_{hombres}=\frac{e^{-1.354}}{1+e^{-1.354}}=\frac{0.258}{1.258}=0.205$$`

---
## Regresión logística simple para independientes continuas

.pull-left[


```r
modelo_titanic_age &lt;-
glm(survived ~ age,
data = tt,
family = "binomial")
```

]

.pull-right[.small[

&lt;table class="texreg" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;caption-side: bottom;color: #000000;border-top: 2px solid #000000;"&gt;
&lt;caption&gt; &lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/th&gt;
&lt;th style="padding-left: 5px;padding-right: 5px;"&gt;Logit&lt;/th&gt;
&lt;th style="padding-left: 5px;padding-right: 5px;"&gt;OR&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr style="border-top: 1px solid #000000;"&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Intercepto&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;-0.137&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;0.872&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;(0.145)&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Edad&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;-0.008&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;0.992&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;(0.004)&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr style="border-top: 1px solid #000000;"&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;AIC&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1415.383&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1415.383&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;BIC&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1425.288&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1425.288&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Log Likelihood&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;-705.691&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;-705.691&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Deviance&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1411.383&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1411.383&lt;/td&gt;
&lt;/tr&gt;
&lt;tr style="border-bottom: 2px solid #000000;"&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Num. obs.&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1046&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1046&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;
&lt;tr&gt;
&lt;td style="font-size: 0.8em;" colspan="3"&gt;&lt;sup&gt;&amp;#42;&amp;#42;&amp;#42;&lt;/sup&gt;p &amp;lt; 0.001; &lt;sup&gt;&amp;#42;&amp;#42;&lt;/sup&gt;p &amp;lt; 0.01; &lt;sup&gt;&amp;#42;&lt;/sup&gt;p &amp;lt; 0.05&lt;/td&gt;
&lt;/tr&gt;
&lt;/tfoot&gt;
&lt;/table&gt;

]
]


---
## Plot probabilidades predichas

.center[

![](09-clase9_files/figure-html/unnamed-chunk-38-1.png)&lt;!-- --&gt;

]


---
# Regresión logística multiple

.pull-left[


```r
modelo_titanic2 &lt;-
glm(survived ~ sex + age,
data = tt,
family = "binomial")
```

]

.pull-right[.small[

&lt;table class="texreg" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;caption-side: bottom;color: #000000;border-top: 2px solid #000000;"&gt;
&lt;caption&gt; &lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/th&gt;
&lt;th style="padding-left: 5px;padding-right: 5px;"&gt;Logit&lt;/th&gt;
&lt;th style="padding-left: 5px;padding-right: 5px;"&gt;OR&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr style="border-top: 1px solid #000000;"&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Intercepto&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;-1.23&lt;sup&gt;&amp;#42;&amp;#42;&amp;#42;&lt;/sup&gt;&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;0.29&lt;sup&gt;&amp;#42;&amp;#42;&amp;#42;&lt;/sup&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;(0.18)&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Mujer (Ref=Hombre)&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;2.46&lt;sup&gt;&amp;#42;&amp;#42;&amp;#42;&lt;/sup&gt;&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;11.71&lt;sup&gt;&amp;#42;&amp;#42;&amp;#42;&lt;/sup&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;(0.15)&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Edad&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;-0.00&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1.00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;(0.01)&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr style="border-top: 1px solid #000000;"&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;AIC&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1107.34&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1107.34&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;BIC&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1122.20&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1122.20&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Log Likelihood&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;-550.67&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;-550.67&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Deviance&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1101.34&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1101.34&lt;/td&gt;
&lt;/tr&gt;
&lt;tr style="border-bottom: 2px solid #000000;"&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;Num. obs.&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1046&lt;/td&gt;
&lt;td style="padding-left: 5px;padding-right: 5px;"&gt;1046&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;
&lt;tr&gt;
&lt;td style="font-size: 0.8em;" colspan="3"&gt;&lt;sup&gt;&amp;#42;&amp;#42;&amp;#42;&lt;/sup&gt;p &amp;lt; 0.001; &lt;sup&gt;&amp;#42;&amp;#42;&lt;/sup&gt;p &amp;lt; 0.01; &lt;sup&gt;&amp;#42;&lt;/sup&gt;p &amp;lt; 0.05&lt;/td&gt;
&lt;/tr&gt;
&lt;/tfoot&gt;
&lt;/table&gt;

]
]



---
class: inverse

### Resumen

- regresión logística: ajusta el modelo para dependientes dicotómicas

- requiere de ajustes y transformaciones para que la estimación tenga sentido

- pasa por el cálculo de los odds-ratio, que resumen en 1 número la relación entre dos variables categóricas

- En regresión logística la interpretación sustantiva de coeficientes se realiza con los odds-ratio (exponenciando los coeficientes logit)


---
class: front

.pull-left[
## Metodología Cuantitativa Avanzada
## **Kevin Carrasco**
## Magíster en ciencias sociales - Universidad de Chile
## 1er Sem 2025
## [.green[metod2-mcs.netlify.com]](https://metod2-mcs.netlify.com)
] 


.pull-right[
.right[
&lt;br&gt;
## .yellow[Sesión 9: Regresión logística]
![:scale 70%](../../files/img/eval-hires.png)



]

]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://multinivel.netlify.app/docpres/xaringan_custom/macros.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>
<style>
.logo {
  background-image: url("../hex_multiva_white.png");
  background-size: contain;
  background-repeat: no-repeat;
  position: absolute;
  top: 16.3em;
  right: 31em;
  width: 110px;
  height: 70px;
  z-index: 0;
}
</style>

<script>
document
  .querySelectorAll(
    '.remark-slide-content' +
    ':not(.title-slide)' +
    // add additional classes to exclude here, e.g.
    // ':not(.inverse)' +
    ':not(.hide-logo)'
  )
  .forEach(el => {
    el.innerHTML += '<div class="logo"></div>';
  });
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
